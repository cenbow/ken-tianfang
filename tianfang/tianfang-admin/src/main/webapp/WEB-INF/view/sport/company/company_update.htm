<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Form Elements - Ace Admin</title>
<meta name="description" content="Common form elements and layouts" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<#include "../../admin/head.htm"/>
		<script type="text/javascript" charset="utf-8" src="${base}/plugins/umeditor1.2.2/umeditor.config.js"></script>
		<script type="text/javascript" charset="utf-8" src="${base}/plugins/umeditor1.2.2/umeditor.min.js">
		<script type="text/javascript" charset="utf-8" src="${base}/plugins/umeditor1.2.2/lang/zh-cn/zh-cn.js"></script>
		<link href="${base}/plugins/umeditor1.2.2/themes/default/css/umeditor.min.css" type="text/css" rel="stylesheet">	
</head>
<body>
	<div class="container-fluid" id="main-container">
		<div id="main-content" class="clearfix" style="margin-left: 0px;">
			<div id="page-content" class="clearfix">
				<div class="row-fluid">
					<!-- PAGE CONTENT BEGINS HERE -->
					<form id="submitForm" class="form-horizontal" method="POST" enctype="multipart/form-data" >
						<input id="type" name="type" value="" type="hidden">
						<input id="id" name="id" value="${(dto.id)!}" type="hidden">
						<input id="content" name="content" value="" type="hidden">
						<!-- 第一行 -->
						<div class="control-group">
							<!-- <div>
								<label class="control-label" style="margin-right: 20px;" for="form-field-2">类型</label>
						 		<select name="type_sel" id="type_sel" data-placeholder="类型" style="vertical-align:top;width: 100px;visibility:visible;margin-left:20px;">
									<option value="">--请选择--</option>
									<option value="1">公司简介</option>
									<option value="2">诚聘英才</option>
									<option value="3">联系我们</option>
								</select>
							</div> -->
						
							<div class="span6">
								<label class="control-label" style="margin-right: 20px;" for="form-field-2">中文标题</label> 
								<input type="text" name="title" style="width: 280px;" class="span6" id="title" placeholder="中文标题" value="${(dto.title)!}">
							</div>
							<div class="span6">
								<label class="control-label" style="margin-right: 20px;" for="form-field-2">英文标题</label> 
								<input type="text" name="enTitle" style="width: 280px;" class="span6" id="enTitle" placeholder="英文标题" value="${(dto.enTitle)!}">
							</div>
							<div class="span6">
								<label class="control-label" style="margin-right: 20px;" for="form-field-2">内容</label>
								<div class="controls">
									<script id="editor" type="text/plain" >${(dto.content)!}</script>
								</div>
							</div>
						</div>
						<div class="form-actions">
							<button id='savebutton' class="btn btn-info" type="button">
								<i class="icon-ok"></i>保存
							</button>
							&nbsp; &nbsp; &nbsp;
							<button id="reset" class="btn" type="reset">
								<i class="icon-undo"></i>关闭
							</button>
						</div>
						
					</form>
					<!-- PAGE CONTENT ENDS HERE -->
				</div>
				<!--/row-->
			</div>
			<!--/#page-content-->
		</div>
		<!-- #main-content -->
	</div>
	<!--/.fluid-container#main-container-->
	<a href="#" id="btn-scroll-up" class="btn btn-small btn-inverse"> <i
		class="icon-double-angle-up icon-only"></i>
	</a>
	<!-- basic scripts -->
	<!-- <script src="${base}/static/1.9.1/jquery.min.js"></script> -->
	<script type="text/javascript">
		window.jQuery || document.write("<script src='${base}/static/js/jquery-1.9.1.min.js'>\x3C/script>");
	</script>

	<script src="${base}/static/js/bootstrap.min.js"></script>
	<!-- page specific plugin scripts -->

	<script type="text/javascript"
		src="${base}/static/js/chosen.jquery.min.js"></script>
	<!-- 下拉框 -->

	<!--[if lt IE 9]>
		<script type="text/javascript" src="${base}/static/js/excanvas.min.js"></script>
		<![endif]-->
	<script type="text/javascript"
		src="${base}/static/js/jquery-ui-1.10.2.custom.min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/jquery.ui.touch-punch.min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/chosen.jquery.min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/fuelux.spinner.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/bootstrap-datepicker.min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/bootstrap-timepicker.min.js"></script>
	<script type="text/javascript" src="${base}/static/js/date.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/daterangepicker.min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/bootstrap-colorpicker.min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/jquery.autosize-min.js"></script>
	<script type="text/javascript"
		src="${base}/static/js/jquery.inputlimiter.1.3.1.min.js"></script>
	<!-- ace scripts -->
	<script src="${base}/static/js/ace-elements.min.js"></script>
	<script src="${base}/static/js/ace.min.js"></script>
	<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
	<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->

	<!-- layer 弹出框处理 -->
	<script type="text/javascript" src="${base}/plugins/layer2.0/layer.js"></script>

	<script type="text/javascript">
		var um = UM.getEditor('editor');

	
		$(function() {

			$("#savebutton").on('click',function(){
				
				var title = $("#title").val();
				var enTitle = $("#enTitle").val();
				var content = UM.getEditor('editor').getContent();
				/* var type_val = $("#type_sel").val();
				
				if( type_val == null || type_val == ""){
					layer.alert('请选择类型~', { icon: 7 });
					return;
				}else{
					$("#type").val(type_val);
				}  */
				
				if( title == null || title == ""){
					layer.alert('中文标题不能为空~', { icon: 7 });
					return;
				} 
				if( enTitle == null || enTitle == ""){
					layer.alert('英文标题不能为空~', { icon: 7 });
					return;
				}
				
				if( content == null || content == ""){
					layer.alert('内容不能为空~', { icon: 7 });
					return;
				}else{
					$("#content").val(content);
				}
				
				var ajaxParams = $("#submitForm").serialize();
				$.ajax({
					type : "POST",
					url : "${base}/companyRelated/updateRData.do",
					data : ajaxParams,
					datatype : "json",// "xml", "html", "script", "json", "jsonp", "text".
					beforeSend : function() {
						$("#msg").html("logining");
					},
					success : function(data) {// 成功返回之后调用的函数
						var jsondata = data;// eval('(' + data + ')');
						if(data.status==200){
							parent.layer.msg('保存成功', {
								shade: [0.9, '#000'],
							    icon: 6,
							    time: 1500 //2秒关闭（如果不配置，默认是3秒）
							}, function(){
								parent.reload_page();
								var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
								parent.layer.close(index);
							}); 							
						}else{
							parent.layer.msg('保存出错', {
								shade: [0.9, '#000'],
							    icon: 6,
							    time: 1500 //2秒关闭（如果不配置，默认是3秒）
							}, function(){
							}); 	
						}
						//console.log(data.success);
					},
					complete : function(XMLHttpRequest, textStatus) {// 调用执行后调用的函数
						
					},
					error : function() {// 调用出错执行的函数
					}
				});
			});

			$('#id-input-file-1 , #id-input-file-2').ace_file_input({
				no_file : 'No File ...',
				btn_choose : 'Choose',
				btn_change : 'Change',
				droppable : false,
				onchange : null,
				thumbnail : false
			});
			
		
		// chkItem事件
		function bindCheck() {
			var $chk = $("[name = checkBoxId]:checkbox");
			$chk.on("click", function() {
				$("#check-all").attr("checked",
						$chk.length == $chk.filter(":checked").length);
			})
		}

		// 删除场地
		$("#deletes").on("click",function() {
					var $chk = $("[name = checkBoxId]:checkbox").filter(
							":checked");
					var count = $chk.length;
					if (count > 0) {
						//信息框-例2
						layer.confirm('你确定删除场地吗？', {
							icon : 3
						}, function(index) {
							layer.close(index);
							$chk.each(function() {
								var tr = $(this).parent().parent().parent();
								tr.remove();
							});
							$chk = $("[name = checkBoxId]:checkbox").filter(
									":checked");
							if ($chk.length == 0) {
								$("#check-all").attr("checked", false);
							}
						});
					}
				});
	
		//复选框 
		$("#check-all").on("click", function() {
			if ($(this).prop('checked')) {
				$("[name = checkBoxId]:checkbox").prop("checked", true);
			} else {
				$("[name = checkBoxId]:checkbox").prop("checked", false);
			}
		});
		
		$('#reset').click(function(){
			var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
			parent.layer.close(index);
		});
		
		});
	</script>
</body>
</html>
